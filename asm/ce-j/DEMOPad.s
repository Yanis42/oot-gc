# DEMOPad.c
.include "macros.inc"

.section .text, "ax"

.balign 4

DEMOPadCopy:
/* 0B1954 800B6EF4 8803000A */  lbz     r0, 0xa(r3)
/* 0B1958 800B6EF8 7C000774 */  extsb   r0, r0
/* 0B195C 800B6EFC 2C00FFFD */  cmpwi   r0, -3
/* 0B1960 800B6F00 41820164 */  beq     lbl_800B7064
/* 0B1964 800B6F04 88A30002 */  lbz     r5, 2(r3)
/* 0B1968 800B6F08 38E00000 */  li      r7, 0
/* 0B196C 800B6F0C 7CA00774 */  extsb   r0, r5
/* 0B1970 800B6F10 2C00FFD0 */  cmpwi   r0, -48
/* 0B1974 800B6F14 40800008 */  bge     lbl_800B6F1C
/* 0B1978 800B6F18 60E74000 */  ori     r7, r7, 0x4000
lbl_800B6F1C:
/* 0B197C 800B6F1C 7CA00774 */  extsb   r0, r5
/* 0B1980 800B6F20 2C000030 */  cmpwi   r0, 0x30
/* 0B1984 800B6F24 40810008 */  ble     lbl_800B6F2C
/* 0B1988 800B6F28 60E78000 */  ori     r7, r7, 0x8000
lbl_800B6F2C:
/* 0B198C 800B6F2C 88A30003 */  lbz     r5, 3(r3)
/* 0B1990 800B6F30 7CA00774 */  extsb   r0, r5
/* 0B1994 800B6F34 2C00FFD0 */  cmpwi   r0, -48
/* 0B1998 800B6F38 40800008 */  bge     lbl_800B6F40
/* 0B199C 800B6F3C 60E72000 */  ori     r7, r7, 0x2000
lbl_800B6F40:
/* 0B19A0 800B6F40 7CA00774 */  extsb   r0, r5
/* 0B19A4 800B6F44 2C000030 */  cmpwi   r0, 0x30
/* 0B19A8 800B6F48 40810008 */  ble     lbl_800B6F50
/* 0B19AC 800B6F4C 60E71000 */  ori     r7, r7, 0x1000
lbl_800B6F50:
/* 0B19B0 800B6F50 88A30004 */  lbz     r5, 4(r3)
/* 0B19B4 800B6F54 7CA00774 */  extsb   r0, r5
/* 0B19B8 800B6F58 2C00FFD0 */  cmpwi   r0, -48
/* 0B19BC 800B6F5C 40800008 */  bge     lbl_800B6F64
/* 0B19C0 800B6F60 60E70400 */  ori     r7, r7, 0x400
lbl_800B6F64:
/* 0B19C4 800B6F64 7CA00774 */  extsb   r0, r5
/* 0B19C8 800B6F68 2C000030 */  cmpwi   r0, 0x30
/* 0B19CC 800B6F6C 40810008 */  ble     lbl_800B6F74
/* 0B19D0 800B6F70 60E70800 */  ori     r7, r7, 0x800
lbl_800B6F74:
/* 0B19D4 800B6F74 88A30005 */  lbz     r5, 5(r3)
/* 0B19D8 800B6F78 7CA00774 */  extsb   r0, r5
/* 0B19DC 800B6F7C 2C00FFD0 */  cmpwi   r0, -48
/* 0B19E0 800B6F80 40800008 */  bge     lbl_800B6F88
/* 0B19E4 800B6F84 60E70200 */  ori     r7, r7, 0x200
lbl_800B6F88:
/* 0B19E8 800B6F88 7CA00774 */  extsb   r0, r5
/* 0B19EC 800B6F8C 2C000030 */  cmpwi   r0, 0x30
/* 0B19F0 800B6F90 40810008 */  ble     lbl_800B6F98
/* 0B19F4 800B6F94 60E70100 */  ori     r7, r7, 0x100
lbl_800B6F98:
/* 0B19F8 800B6F98 A0040010 */  lhz     r0, 0x10(r4)
/* 0B19FC 800B6F9C 54E5043E */  clrlwi  r5, r7, 0x10
/* 0B1A00 800B6FA0 7C002A78 */  xor     r0, r0, r5
/* 0B1A04 800B6FA4 7CA00038 */  and     r0, r5, r0
/* 0B1A08 800B6FA8 B0040012 */  sth     r0, 0x12(r4)
/* 0B1A0C 800B6FAC A0C40010 */  lhz     r6, 0x10(r4)
/* 0B1A10 800B6FB0 7CC02A78 */  xor     r0, r6, r5
/* 0B1A14 800B6FB4 7CC00038 */  and     r0, r6, r0
/* 0B1A18 800B6FB8 B0040014 */  sth     r0, 0x14(r4)
/* 0B1A1C 800B6FBC B0E40010 */  sth     r7, 0x10(r4)
/* 0B1A20 800B6FC0 A0A30000 */  lhz     r5, 0(r3)
/* 0B1A24 800B6FC4 A0040000 */  lhz     r0, 0(r4)
/* 0B1A28 800B6FC8 7C002A78 */  xor     r0, r0, r5
/* 0B1A2C 800B6FCC 7CA00038 */  and     r0, r5, r0
/* 0B1A30 800B6FD0 B004000C */  sth     r0, 0xc(r4)
/* 0B1A34 800B6FD4 A0A40000 */  lhz     r5, 0(r4)
/* 0B1A38 800B6FD8 A0030000 */  lhz     r0, 0(r3)
/* 0B1A3C 800B6FDC 7CA00278 */  xor     r0, r5, r0
/* 0B1A40 800B6FE0 7CA00038 */  and     r0, r5, r0
/* 0B1A44 800B6FE4 B004000E */  sth     r0, 0xe(r4)
/* 0B1A48 800B6FE8 88A40002 */  lbz     r5, 2(r4)
/* 0B1A4C 800B6FEC 88030002 */  lbz     r0, 2(r3)
/* 0B1A50 800B6FF0 7CA50774 */  extsb   r5, r5
/* 0B1A54 800B6FF4 7C000774 */  extsb   r0, r0
/* 0B1A58 800B6FF8 7C050050 */  subf    r0, r5, r0
/* 0B1A5C 800B6FFC B0040016 */  sth     r0, 0x16(r4)
/* 0B1A60 800B7000 88A40003 */  lbz     r5, 3(r4)
/* 0B1A64 800B7004 88030003 */  lbz     r0, 3(r3)
/* 0B1A68 800B7008 7CA50774 */  extsb   r5, r5
/* 0B1A6C 800B700C 7C000774 */  extsb   r0, r0
/* 0B1A70 800B7010 7C050050 */  subf    r0, r5, r0
/* 0B1A74 800B7014 B0040018 */  sth     r0, 0x18(r4)
/* 0B1A78 800B7018 88A40004 */  lbz     r5, 4(r4)
/* 0B1A7C 800B701C 88030004 */  lbz     r0, 4(r3)
/* 0B1A80 800B7020 7CA50774 */  extsb   r5, r5
/* 0B1A84 800B7024 7C000774 */  extsb   r0, r0
/* 0B1A88 800B7028 7C050050 */  subf    r0, r5, r0
/* 0B1A8C 800B702C B004001A */  sth     r0, 0x1a(r4)
/* 0B1A90 800B7030 88A40005 */  lbz     r5, 5(r4)
/* 0B1A94 800B7034 88030005 */  lbz     r0, 5(r3)
/* 0B1A98 800B7038 7CA50774 */  extsb   r5, r5
/* 0B1A9C 800B703C 7C000774 */  extsb   r0, r0
/* 0B1AA0 800B7040 7C050050 */  subf    r0, r5, r0
/* 0B1AA4 800B7044 B004001C */  sth     r0, 0x1c(r4)
/* 0B1AA8 800B7048 80A30000 */  lwz     r5, 0(r3)
/* 0B1AAC 800B704C 80030004 */  lwz     r0, 4(r3)
/* 0B1AB0 800B7050 90A40000 */  stw     r5, 0(r4)
/* 0B1AB4 800B7054 90040004 */  stw     r0, 4(r4)
/* 0B1AB8 800B7058 80030008 */  lwz     r0, 8(r3)
/* 0B1ABC 800B705C 90040008 */  stw     r0, 8(r4)
/* 0B1AC0 800B7060 4E800020 */  blr     
lbl_800B7064:
/* 0B1AC4 800B7064 38000000 */  li      r0, 0
/* 0B1AC8 800B7068 B0040014 */  sth     r0, 0x14(r4)
/* 0B1ACC 800B706C B0040012 */  sth     r0, 0x12(r4)
/* 0B1AD0 800B7070 B004000E */  sth     r0, 0xe(r4)
/* 0B1AD4 800B7074 B004000C */  sth     r0, 0xc(r4)
/* 0B1AD8 800B7078 B0040018 */  sth     r0, 0x18(r4)
/* 0B1ADC 800B707C B0040016 */  sth     r0, 0x16(r4)
/* 0B1AE0 800B7080 B004001C */  sth     r0, 0x1c(r4)
/* 0B1AE4 800B7084 B004001A */  sth     r0, 0x1a(r4)
/* 0B1AE8 800B7088 4E800020 */  blr     

glabel DEMOPadRead
/* 0B1AEC 800B708C 7C0802A6 */  mflr    r0
/* 0B1AF0 800B7090 3C608013 */  lis     r3, Pad@ha
/* 0B1AF4 800B7094 90010004 */  stw     r0, 4(r1)
/* 0B1AF8 800B7098 9421FFE0 */  stwu    r1, -0x20(r1)
/* 0B1AFC 800B709C BF61000C */  stmw    r27, 0xc(r1)
/* 0B1B00 800B70A0 3BE32728 */  addi    r31, r3, Pad@l
/* 0B1B04 800B70A4 387F0000 */  addi    r3, r31, 0
/* 0B1B08 800B70A8 3B600000 */  li      r27, 0
/* 0B1B0C 800B70AC 4BFF9A85 */  bl      PADRead
/* 0B1B10 800B70B0 7FE3FB78 */  mr      r3, r31
/* 0B1B14 800B70B4 4BFF8D7D */  bl      PADClamp
/* 0B1B18 800B70B8 3B800000 */  li      r28, 0
/* 0B1B1C 800B70BC 1C1C001E */  mulli   r0, r28, 0x1e
/* 0B1B20 800B70C0 38800000 */  li      r4, 0
/* 0B1B24 800B70C4 3C60800F */  lis     r3, PadChanMask@ha
/* 0B1B28 800B70C8 908D8DC0 */  stw     r4, DemoNumValidPads@sda21(r13)
/* 0B1B2C 800B70CC 7FBF0214 */  add     r29, r31, r0
/* 0B1B30 800B70D0 3BC33420 */  addi    r30, r3, PadChanMask@l
/* 0B1B34 800B70D4 3BBD0030 */  addi    r29, r29, 0x30
lbl_800B70D8:
/* 0B1B38 800B70D8 887F000A */  lbz     r3, 0xa(r31)
/* 0B1B3C 800B70DC 7C600775 */  extsb.  r0, r3
/* 0B1B40 800B70E0 41820010 */  beq     lbl_800B70F0
/* 0B1B44 800B70E4 7C600774 */  extsb   r0, r3
/* 0B1B48 800B70E8 2C00FFFD */  cmpwi   r0, -3
/* 0B1B4C 800B70EC 40820014 */  bne     lbl_800B7100
lbl_800B70F0:
/* 0B1B50 800B70F0 806D8DC0 */  lwz     r3, DemoNumValidPads@sda21(r13)
/* 0B1B54 800B70F4 38030001 */  addi    r0, r3, 1
/* 0B1B58 800B70F8 900D8DC0 */  stw     r0, DemoNumValidPads@sda21(r13)
/* 0B1B5C 800B70FC 48000014 */  b       lbl_800B7110
lbl_800B7100:
/* 0B1B60 800B7100 2C00FFFF */  cmpwi   r0, -1
/* 0B1B64 800B7104 4082000C */  bne     lbl_800B7110
/* 0B1B68 800B7108 801E0000 */  lwz     r0, 0(r30)
/* 0B1B6C 800B710C 7F7B0378 */  or      r27, r27, r0
lbl_800B7110:
/* 0B1B70 800B7110 387F0000 */  addi    r3, r31, 0
/* 0B1B74 800B7114 389D0000 */  addi    r4, r29, 0
/* 0B1B78 800B7118 4BFFFDDD */  bl      DEMOPadCopy
/* 0B1B7C 800B711C 3B9C0001 */  addi    r28, r28, 1
/* 0B1B80 800B7120 2C1C0004 */  cmpwi   r28, 4
/* 0B1B84 800B7124 3BFF000C */  addi    r31, r31, 0xc
/* 0B1B88 800B7128 3BDE0004 */  addi    r30, r30, 4
/* 0B1B8C 800B712C 3BBD001E */  addi    r29, r29, 0x1e
/* 0B1B90 800B7130 4180FFA8 */  blt     lbl_800B70D8
/* 0B1B94 800B7134 281B0000 */  cmplwi  r27, 0
/* 0B1B98 800B7138 4182000C */  beq     lbl_800B7144
/* 0B1B9C 800B713C 7F63DB78 */  mr      r3, r27
/* 0B1BA0 800B7140 4BFF967D */  bl      PADReset
lbl_800B7144:
/* 0B1BA4 800B7144 BB61000C */  lmw     r27, 0xc(r1)
/* 0B1BA8 800B7148 80010024 */  lwz     r0, 0x24(r1)
/* 0B1BAC 800B714C 38210020 */  addi    r1, r1, 0x20
/* 0B1BB0 800B7150 7C0803A6 */  mtlr    r0
/* 0B1BB4 800B7154 4E800020 */  blr     

glabel DEMOPadInit
/* 0B1BB8 800B7158 7C0802A6 */  mflr    r0
/* 0B1BBC 800B715C 90010004 */  stw     r0, 4(r1)
/* 0B1BC0 800B7160 9421FFF8 */  stwu    r1, -8(r1)
/* 0B1BC4 800B7164 4BFF987D */  bl      PADInit
/* 0B1BC8 800B7168 38000002 */  li      r0, 2
/* 0B1BCC 800B716C 3C608013 */  lis     r3, DemoPad@ha
/* 0B1BD0 800B7170 7C0903A6 */  mtctr   r0
/* 0B1BD4 800B7174 38632758 */  addi    r3, r3, DemoPad@l
lbl_800B7178:
/* 0B1BD8 800B7178 38000000 */  li      r0, 0
/* 0B1BDC 800B717C B0030000 */  sth     r0, 0(r3)
/* 0B1BE0 800B7180 98030002 */  stb     r0, 2(r3)
/* 0B1BE4 800B7184 98030003 */  stb     r0, 3(r3)
/* 0B1BE8 800B7188 98030004 */  stb     r0, 4(r3)
/* 0B1BEC 800B718C 98030005 */  stb     r0, 5(r3)
/* 0B1BF0 800B7190 98030006 */  stb     r0, 6(r3)
/* 0B1BF4 800B7194 98030007 */  stb     r0, 7(r3)
/* 0B1BF8 800B7198 98030008 */  stb     r0, 8(r3)
/* 0B1BFC 800B719C 98030009 */  stb     r0, 9(r3)
/* 0B1C00 800B71A0 9803000A */  stb     r0, 0xa(r3)
/* 0B1C04 800B71A4 B003000C */  sth     r0, 0xc(r3)
/* 0B1C08 800B71A8 B003000E */  sth     r0, 0xe(r3)
/* 0B1C0C 800B71AC B0030010 */  sth     r0, 0x10(r3)
/* 0B1C10 800B71B0 B0030012 */  sth     r0, 0x12(r3)
/* 0B1C14 800B71B4 B0030014 */  sth     r0, 0x14(r3)
/* 0B1C18 800B71B8 B0030016 */  sth     r0, 0x16(r3)
/* 0B1C1C 800B71BC B0030018 */  sth     r0, 0x18(r3)
/* 0B1C20 800B71C0 B003001A */  sth     r0, 0x1a(r3)
/* 0B1C24 800B71C4 B003001C */  sth     r0, 0x1c(r3)
/* 0B1C28 800B71C8 B003001E */  sth     r0, 0x1e(r3)
/* 0B1C2C 800B71CC 98030020 */  stb     r0, 0x20(r3)
/* 0B1C30 800B71D0 98030021 */  stb     r0, 0x21(r3)
/* 0B1C34 800B71D4 98030022 */  stb     r0, 0x22(r3)
/* 0B1C38 800B71D8 98030023 */  stb     r0, 0x23(r3)
/* 0B1C3C 800B71DC 98030024 */  stb     r0, 0x24(r3)
/* 0B1C40 800B71E0 98030025 */  stb     r0, 0x25(r3)
/* 0B1C44 800B71E4 98030026 */  stb     r0, 0x26(r3)
/* 0B1C48 800B71E8 98030027 */  stb     r0, 0x27(r3)
/* 0B1C4C 800B71EC 98030028 */  stb     r0, 0x28(r3)
/* 0B1C50 800B71F0 B003002A */  sth     r0, 0x2a(r3)
/* 0B1C54 800B71F4 B003002C */  sth     r0, 0x2c(r3)
/* 0B1C58 800B71F8 B003002E */  sth     r0, 0x2e(r3)
/* 0B1C5C 800B71FC B0030030 */  sth     r0, 0x30(r3)
/* 0B1C60 800B7200 B0030032 */  sth     r0, 0x32(r3)
/* 0B1C64 800B7204 B0030034 */  sth     r0, 0x34(r3)
/* 0B1C68 800B7208 B0030036 */  sth     r0, 0x36(r3)
/* 0B1C6C 800B720C B0030038 */  sth     r0, 0x38(r3)
/* 0B1C70 800B7210 B003003A */  sth     r0, 0x3a(r3)
/* 0B1C74 800B7214 3863003C */  addi    r3, r3, 0x3c
/* 0B1C78 800B7218 4200FF60 */  bdnz    lbl_800B7178
/* 0B1C7C 800B721C 8001000C */  lwz     r0, 0xc(r1)
/* 0B1C80 800B7220 38210008 */  addi    r1, r1, 8
/* 0B1C84 800B7224 7C0803A6 */  mtlr    r0
/* 0B1C88 800B7228 4E800020 */  blr     

.section .data, "wa"

.balign 8

/* 000F04A0 800F3420 0010 */
PadChanMask:
    .long 0x80000000, 0x40000000, 0x20000000, 0x10000000

.section .bss, "wa"

.balign 4

/* 0012F7A8 80132728 0030 */
Pad:
    .skip 0x30

/* 0012F7D8 80132758 0078 */
glabel DemoPad
    .skip 0x78

.section .sbss, "wa"

.balign 8

/* 000F1D20 80135AA0 0004 */
glabel DemoNumValidPads
    .skip 4
