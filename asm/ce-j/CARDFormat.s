# CARDFormat.c
.include "macros.inc"

.section .text, "ax"

.balign 4

FormatCallback:
/* 0BA028 800BF5C8 7C0802A6 */  mflr    r0
/* 0BA02C 800BF5CC 90010004 */  stw     r0, 4(r1)
/* 0BA030 800BF5D0 9421FFE0 */  stwu    r1, -0x20(r1)
/* 0BA034 800BF5D4 93E1001C */  stw     r31, 0x1c(r1)
/* 0BA038 800BF5D8 93C10018 */  stw     r30, 0x18(r1)
/* 0BA03C 800BF5DC 3BC30000 */  addi    r30, r3, 0
/* 0BA040 800BF5E0 3C608013 */  lis     r3, __CARDBlock@ha
/* 0BA044 800BF5E4 93A10014 */  stw     r29, 0x14(r1)
/* 0BA048 800BF5E8 1CBE0110 */  mulli   r5, r30, 0x110
/* 0BA04C 800BF5EC 93810010 */  stw     r28, 0x10(r1)
/* 0BA050 800BF5F0 380327D0 */  addi    r0, r3, __CARDBlock@l
/* 0BA054 800BF5F4 7C9C2379 */  or.     r28, r4, r4
/* 0BA058 800BF5F8 7FE02A14 */  add     r31, r0, r5
/* 0BA05C 800BF5FC 418000C4 */  blt     lbl_800BF6C0
/* 0BA060 800BF600 807F0028 */  lwz     r3, 0x28(r31)
/* 0BA064 800BF604 38030001 */  addi    r0, r3, 1
/* 0BA068 800BF608 901F0028 */  stw     r0, 0x28(r31)
/* 0BA06C 800BF60C 809F0028 */  lwz     r4, 0x28(r31)
/* 0BA070 800BF610 2C040005 */  cmpwi   r4, 5
/* 0BA074 800BF614 40800028 */  bge     lbl_800BF63C
/* 0BA078 800BF618 801F000C */  lwz     r0, 0xc(r31)
/* 0BA07C 800BF61C 3C60800C */  lis     r3, FormatCallback@ha
/* 0BA080 800BF620 38A3F5C8 */  addi    r5, r3, FormatCallback@l
/* 0BA084 800BF624 7C8021D6 */  mullw   r4, r0, r4
/* 0BA088 800BF628 387E0000 */  addi    r3, r30, 0
/* 0BA08C 800BF62C 4BFFC4C5 */  bl      __CARDEraseSector
/* 0BA090 800BF630 7C7C1B79 */  or.     r28, r3, r3
/* 0BA094 800BF634 4180008C */  blt     lbl_800BF6C0
/* 0BA098 800BF638 480000B4 */  b       lbl_800BF6EC
lbl_800BF63C:
/* 0BA09C 800BF63C 2C04000A */  cmpwi   r4, 0xa
/* 0BA0A0 800BF640 4080003C */  bge     lbl_800BF67C
/* 0BA0A4 800BF644 801F000C */  lwz     r0, 0xc(r31)
/* 0BA0A8 800BF648 38C4FFFB */  addi    r6, r4, -5
/* 0BA0AC 800BF64C 3C60800C */  lis     r3, FormatCallback@ha
/* 0BA0B0 800BF650 80BF0080 */  lwz     r5, 0x80(r31)
/* 0BA0B4 800BF654 7C8031D6 */  mullw   r4, r0, r6
/* 0BA0B8 800BF658 54C06824 */  slwi    r0, r6, 0xd
/* 0BA0BC 800BF65C 38E3F5C8 */  addi    r7, r3, FormatCallback@l
/* 0BA0C0 800BF660 7CC50214 */  add     r6, r5, r0
/* 0BA0C4 800BF664 387E0000 */  addi    r3, r30, 0
/* 0BA0C8 800BF668 38A02000 */  li      r5, 0x2000
/* 0BA0CC 800BF66C 4BFFDE51 */  bl      __CARDWrite
/* 0BA0D0 800BF670 7C7C1B79 */  or.     r28, r3, r3
/* 0BA0D4 800BF674 4180004C */  blt     lbl_800BF6C0
/* 0BA0D8 800BF678 48000074 */  b       lbl_800BF6EC
lbl_800BF67C:
/* 0BA0DC 800BF67C 807F0080 */  lwz     r3, 0x80(r31)
/* 0BA0E0 800BF680 38A02000 */  li      r5, 0x2000
/* 0BA0E4 800BF684 38032000 */  addi    r0, r3, 0x2000
/* 0BA0E8 800BF688 901F0084 */  stw     r0, 0x84(r31)
/* 0BA0EC 800BF68C 809F0080 */  lwz     r4, 0x80(r31)
/* 0BA0F0 800BF690 807F0084 */  lwz     r3, 0x84(r31)
/* 0BA0F4 800BF694 38844000 */  addi    r4, r4, 0x4000
/* 0BA0F8 800BF698 4BF45E2D */  bl      memcpy
/* 0BA0FC 800BF69C 807F0080 */  lwz     r3, 0x80(r31)
/* 0BA100 800BF6A0 38A02000 */  li      r5, 0x2000
/* 0BA104 800BF6A4 38036000 */  addi    r0, r3, 0x6000
/* 0BA108 800BF6A8 901F0088 */  stw     r0, 0x88(r31)
/* 0BA10C 800BF6AC 809F0080 */  lwz     r4, 0x80(r31)
/* 0BA110 800BF6B0 807F0088 */  lwz     r3, 0x88(r31)
/* 0BA114 800BF6B4 3C840001 */  addis   r4, r4, 1
/* 0BA118 800BF6B8 38848000 */  addi    r4, r4, -32768
/* 0BA11C 800BF6BC 4BF45E09 */  bl      memcpy
lbl_800BF6C0:
/* 0BA120 800BF6C0 83BF00D0 */  lwz     r29, 0xd0(r31)
/* 0BA124 800BF6C4 38000000 */  li      r0, 0
/* 0BA128 800BF6C8 387F0000 */  addi    r3, r31, 0
/* 0BA12C 800BF6CC 901F00D0 */  stw     r0, 0xd0(r31)
/* 0BA130 800BF6D0 7F84E378 */  mr      r4, r28
/* 0BA134 800BF6D4 4BFFC6A1 */  bl      __CARDPutControlBlock
/* 0BA138 800BF6D8 399D0000 */  addi    r12, r29, 0
/* 0BA13C 800BF6DC 7D8803A6 */  mtlr    r12
/* 0BA140 800BF6E0 387E0000 */  addi    r3, r30, 0
/* 0BA144 800BF6E4 389C0000 */  addi    r4, r28, 0
/* 0BA148 800BF6E8 4E800021 */  blrl    
lbl_800BF6EC:
/* 0BA14C 800BF6EC 80010024 */  lwz     r0, 0x24(r1)
/* 0BA150 800BF6F0 83E1001C */  lwz     r31, 0x1c(r1)
/* 0BA154 800BF6F4 83C10018 */  lwz     r30, 0x18(r1)
/* 0BA158 800BF6F8 83A10014 */  lwz     r29, 0x14(r1)
/* 0BA15C 800BF6FC 83810010 */  lwz     r28, 0x10(r1)
/* 0BA160 800BF700 38210020 */  addi    r1, r1, 0x20
/* 0BA164 800BF704 7C0803A6 */  mtlr    r0
/* 0BA168 800BF708 4E800020 */  blr     

glabel __CARDFormatRegionAsync
/* 0BA16C 800BF70C 7C0802A6 */  mflr    r0
/* 0BA170 800BF710 90010004 */  stw     r0, 4(r1)
/* 0BA174 800BF714 9421FFA8 */  stwu    r1, -0x58(r1)
/* 0BA178 800BF718 BE410020 */  stmw    r18, 0x20(r1)
/* 0BA17C 800BF71C 3A840000 */  addi    r20, r4, 0
/* 0BA180 800BF720 3AC30000 */  addi    r22, r3, 0
/* 0BA184 800BF724 3A650000 */  addi    r19, r5, 0
/* 0BA188 800BF728 38810018 */  addi    r4, r1, 0x18
/* 0BA18C 800BF72C 4BFFC591 */  bl      __CARDGetControlBlock
/* 0BA190 800BF730 2C030000 */  cmpwi   r3, 0
/* 0BA194 800BF734 40800008 */  bge     lbl_800BF73C
/* 0BA198 800BF738 48000618 */  b       lbl_800BFD50
lbl_800BF73C:
/* 0BA19C 800BF73C 80610018 */  lwz     r3, 0x18(r1)
/* 0BA1A0 800BF740 388000FF */  li      r4, 0xff
/* 0BA1A4 800BF744 38A02000 */  li      r5, 0x2000
/* 0BA1A8 800BF748 83630080 */  lwz     r27, 0x80(r3)
/* 0BA1AC 800BF74C 7F63DB78 */  mr      r3, r27
/* 0BA1B0 800BF750 4BF45C81 */  bl      memset
/* 0BA1B4 800BF754 3C60CC00 */  lis     r3, VI_REGS_BASE@ha
/* 0BA1B8 800BF758 A243206E */  lhz     r18, (VI_REGS_BASE + VI_SEL)@l(r3)
/* 0BA1BC 800BF75C B29B0024 */  sth     r20, 0x24(r27)
/* 0BA1C0 800BF760 4BFE112D */  bl      __OSLockSram
/* 0BA1C4 800BF764 8003000C */  lwz     r0, 0xc(r3)
/* 0BA1C8 800BF768 901B0014 */  stw     r0, 0x14(r27)
/* 0BA1CC 800BF76C 88030012 */  lbz     r0, 0x12(r3)
/* 0BA1D0 800BF770 38600000 */  li      r3, 0
/* 0BA1D4 800BF774 901B0018 */  stw     r0, 0x18(r27)
/* 0BA1D8 800BF778 4BFE1509 */  bl      __OSUnlockSram
/* 0BA1DC 800BF77C 4BFE2B2D */  bl      OSGetTime
/* 0BA1E0 800BF780 3AA40000 */  addi    r21, r4, 0
/* 0BA1E4 800BF784 3A830000 */  addi    r20, r3, 0
/* 0BA1E8 800BF788 3B550000 */  addi    r26, r21, 0
/* 0BA1EC 800BF78C 3BD40000 */  addi    r30, r20, 0
/* 0BA1F0 800BF790 4BFE1159 */  bl      __OSLockSramEx
/* 0BA1F4 800BF794 1C16000C */  mulli   r0, r22, 0xc
/* 0BA1F8 800BF798 7F230214 */  add     r25, r3, r0
/* 0BA1FC 800BF79C 3C6041C6 */  lis     r3, 0x41c6
/* 0BA200 800BF7A0 3B190000 */  addi    r24, r25, 0
/* 0BA204 800BF7A4 3BE34E6D */  addi    r31, r3, 0x4e6d
/* 0BA208 800BF7A8 3B800000 */  li      r28, 0
/* 0BA20C 800BF7AC 3AE00004 */  li      r23, 4
/* 0BA210 800BF7B0 48000374 */  b       lbl_800BFB24
lbl_800BF7B4:
/* 0BA214 800BF7B4 7CBEF9D6 */  mullw   r5, r30, r31
/* 0BA218 800BF7B8 7C7AF816 */  mulhwu  r3, r26, r31
/* 0BA21C 800BF7BC 3BC00000 */  li      r30, 0
/* 0BA220 800BF7C0 7CA51A14 */  add     r5, r5, r3
/* 0BA224 800BF7C4 7C7AF1D6 */  mullw   r3, r26, r30
/* 0BA228 800BF7C8 7C1AF9D6 */  mullw   r0, r26, r31
/* 0BA22C 800BF7CC 3BA03039 */  li      r29, 0x3039
/* 0BA230 800BF7D0 7C80E814 */  addc    r4, r0, r29
/* 0BA234 800BF7D4 7C051A14 */  add     r0, r5, r3
/* 0BA238 800BF7D8 7C60F114 */  adde    r3, r0, r30
/* 0BA23C 800BF7DC 38A00010 */  li      r5, 0x10
/* 0BA240 800BF7E0 4800E5AD */  bl      __shr2i
/* 0BA244 800BF7E4 7CC3F9D6 */  mullw   r6, r3, r31
/* 0BA248 800BF7E8 88180000 */  lbz     r0, 0(r24)
/* 0BA24C 800BF7EC 7CA4F816 */  mulhwu  r5, r4, r31
/* 0BA250 800BF7F0 7CC62A14 */  add     r6, r6, r5
/* 0BA254 800BF7F4 7D040014 */  addc    r8, r4, r0
/* 0BA258 800BF7F8 7F870734 */  extsh   r7, r28
/* 0BA25C 800BF7FC 7CA4F1D6 */  mullw   r5, r4, r30
/* 0BA260 800BF800 7D1B39AE */  stbx    r8, r27, r7
/* 0BA264 800BF804 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA268 800BF808 7C80E814 */  addc    r4, r0, r29
/* 0BA26C 800BF80C 7C062A14 */  add     r0, r6, r5
/* 0BA270 800BF810 7C60F114 */  adde    r3, r0, r30
/* 0BA274 800BF814 38A00010 */  li      r5, 0x10
/* 0BA278 800BF818 4800E575 */  bl      __shr2i
/* 0BA27C 800BF81C 3B407FFF */  li      r26, 0x7fff
/* 0BA280 800BF820 7C60F038 */  and     r0, r3, r30
/* 0BA284 800BF824 7C84D038 */  and     r4, r4, r26
/* 0BA288 800BF828 7CA0F9D6 */  mullw   r5, r0, r31
/* 0BA28C 800BF82C 7C64F816 */  mulhwu  r3, r4, r31
/* 0BA290 800BF830 7CA51A14 */  add     r5, r5, r3
/* 0BA294 800BF834 7C64F1D6 */  mullw   r3, r4, r30
/* 0BA298 800BF838 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA29C 800BF83C 7C80E814 */  addc    r4, r0, r29
/* 0BA2A0 800BF840 7C051A14 */  add     r0, r5, r3
/* 0BA2A4 800BF844 7C60F114 */  adde    r3, r0, r30
/* 0BA2A8 800BF848 38A00010 */  li      r5, 0x10
/* 0BA2AC 800BF84C 4800E541 */  bl      __shr2i
/* 0BA2B0 800BF850 7CC3F9D6 */  mullw   r6, r3, r31
/* 0BA2B4 800BF854 7CA4F816 */  mulhwu  r5, r4, r31
/* 0BA2B8 800BF858 393C0001 */  addi    r9, r28, 1
/* 0BA2BC 800BF85C 7D290734 */  extsh   r9, r9
/* 0BA2C0 800BF860 7C1948AE */  lbzx    r0, r25, r9
/* 0BA2C4 800BF864 7CC62A14 */  add     r6, r6, r5
/* 0BA2C8 800BF868 7CA4F1D6 */  mullw   r5, r4, r30
/* 0BA2CC 800BF86C 7CE40014 */  addc    r7, r4, r0
/* 0BA2D0 800BF870 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA2D4 800BF874 7CFB49AE */  stbx    r7, r27, r9
/* 0BA2D8 800BF878 7C80E814 */  addc    r4, r0, r29
/* 0BA2DC 800BF87C 7C062A14 */  add     r0, r6, r5
/* 0BA2E0 800BF880 7C60F114 */  adde    r3, r0, r30
/* 0BA2E4 800BF884 38A00010 */  li      r5, 0x10
/* 0BA2E8 800BF888 4800E505 */  bl      __shr2i
/* 0BA2EC 800BF88C 7C60F038 */  and     r0, r3, r30
/* 0BA2F0 800BF890 7C84D038 */  and     r4, r4, r26
/* 0BA2F4 800BF894 7CA0F9D6 */  mullw   r5, r0, r31
/* 0BA2F8 800BF898 7C64F816 */  mulhwu  r3, r4, r31
/* 0BA2FC 800BF89C 7CA51A14 */  add     r5, r5, r3
/* 0BA300 800BF8A0 7C64F1D6 */  mullw   r3, r4, r30
/* 0BA304 800BF8A4 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA308 800BF8A8 7C80E814 */  addc    r4, r0, r29
/* 0BA30C 800BF8AC 7C051A14 */  add     r0, r5, r3
/* 0BA310 800BF8B0 7C60F114 */  adde    r3, r0, r30
/* 0BA314 800BF8B4 38A00010 */  li      r5, 0x10
/* 0BA318 800BF8B8 4800E4D5 */  bl      __shr2i
/* 0BA31C 800BF8BC 7CC3F9D6 */  mullw   r6, r3, r31
/* 0BA320 800BF8C0 7CA4F816 */  mulhwu  r5, r4, r31
/* 0BA324 800BF8C4 393C0002 */  addi    r9, r28, 2
/* 0BA328 800BF8C8 7D290734 */  extsh   r9, r9
/* 0BA32C 800BF8CC 7C1948AE */  lbzx    r0, r25, r9
/* 0BA330 800BF8D0 7CC62A14 */  add     r6, r6, r5
/* 0BA334 800BF8D4 7CA4F1D6 */  mullw   r5, r4, r30
/* 0BA338 800BF8D8 7CE40014 */  addc    r7, r4, r0
/* 0BA33C 800BF8DC 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA340 800BF8E0 7CFB49AE */  stbx    r7, r27, r9
/* 0BA344 800BF8E4 7C80E814 */  addc    r4, r0, r29
/* 0BA348 800BF8E8 7C062A14 */  add     r0, r6, r5
/* 0BA34C 800BF8EC 7C60F114 */  adde    r3, r0, r30
/* 0BA350 800BF8F0 38A00010 */  li      r5, 0x10
/* 0BA354 800BF8F4 4800E499 */  bl      __shr2i
/* 0BA358 800BF8F8 7C60F038 */  and     r0, r3, r30
/* 0BA35C 800BF8FC 7C84D038 */  and     r4, r4, r26
/* 0BA360 800BF900 7CA0F9D6 */  mullw   r5, r0, r31
/* 0BA364 800BF904 7C64F816 */  mulhwu  r3, r4, r31
/* 0BA368 800BF908 7CA51A14 */  add     r5, r5, r3
/* 0BA36C 800BF90C 7C64F1D6 */  mullw   r3, r4, r30
/* 0BA370 800BF910 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA374 800BF914 7C80E814 */  addc    r4, r0, r29
/* 0BA378 800BF918 7C051A14 */  add     r0, r5, r3
/* 0BA37C 800BF91C 7C60F114 */  adde    r3, r0, r30
/* 0BA380 800BF920 38A00010 */  li      r5, 0x10
/* 0BA384 800BF924 4800E469 */  bl      __shr2i
/* 0BA388 800BF928 7CC3F9D6 */  mullw   r6, r3, r31
/* 0BA38C 800BF92C 7CA4F816 */  mulhwu  r5, r4, r31
/* 0BA390 800BF930 393C0003 */  addi    r9, r28, 3
/* 0BA394 800BF934 7D290734 */  extsh   r9, r9
/* 0BA398 800BF938 7C1948AE */  lbzx    r0, r25, r9
/* 0BA39C 800BF93C 7CC62A14 */  add     r6, r6, r5
/* 0BA3A0 800BF940 7CA4F1D6 */  mullw   r5, r4, r30
/* 0BA3A4 800BF944 7CE40014 */  addc    r7, r4, r0
/* 0BA3A8 800BF948 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA3AC 800BF94C 7CFB49AE */  stbx    r7, r27, r9
/* 0BA3B0 800BF950 7C80E814 */  addc    r4, r0, r29
/* 0BA3B4 800BF954 7C062A14 */  add     r0, r6, r5
/* 0BA3B8 800BF958 7C60F114 */  adde    r3, r0, r30
/* 0BA3BC 800BF95C 38A00010 */  li      r5, 0x10
/* 0BA3C0 800BF960 4800E42D */  bl      __shr2i
/* 0BA3C4 800BF964 7C60F038 */  and     r0, r3, r30
/* 0BA3C8 800BF968 7C84D038 */  and     r4, r4, r26
/* 0BA3CC 800BF96C 7CA0F9D6 */  mullw   r5, r0, r31
/* 0BA3D0 800BF970 7C64F816 */  mulhwu  r3, r4, r31
/* 0BA3D4 800BF974 7CA51A14 */  add     r5, r5, r3
/* 0BA3D8 800BF978 7C64F1D6 */  mullw   r3, r4, r30
/* 0BA3DC 800BF97C 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA3E0 800BF980 7C80E814 */  addc    r4, r0, r29
/* 0BA3E4 800BF984 7C051A14 */  add     r0, r5, r3
/* 0BA3E8 800BF988 7C60F114 */  adde    r3, r0, r30
/* 0BA3EC 800BF98C 38A00010 */  li      r5, 0x10
/* 0BA3F0 800BF990 4800E3FD */  bl      __shr2i
/* 0BA3F4 800BF994 7CC3F9D6 */  mullw   r6, r3, r31
/* 0BA3F8 800BF998 7CA4F816 */  mulhwu  r5, r4, r31
/* 0BA3FC 800BF99C 393C0004 */  addi    r9, r28, 4
/* 0BA400 800BF9A0 7D290734 */  extsh   r9, r9
/* 0BA404 800BF9A4 7C1948AE */  lbzx    r0, r25, r9
/* 0BA408 800BF9A8 7CC62A14 */  add     r6, r6, r5
/* 0BA40C 800BF9AC 7CA4F1D6 */  mullw   r5, r4, r30
/* 0BA410 800BF9B0 7CE40014 */  addc    r7, r4, r0
/* 0BA414 800BF9B4 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA418 800BF9B8 7CFB49AE */  stbx    r7, r27, r9
/* 0BA41C 800BF9BC 7C80E814 */  addc    r4, r0, r29
/* 0BA420 800BF9C0 7C062A14 */  add     r0, r6, r5
/* 0BA424 800BF9C4 7C60F114 */  adde    r3, r0, r30
/* 0BA428 800BF9C8 38A00010 */  li      r5, 0x10
/* 0BA42C 800BF9CC 4800E3C1 */  bl      __shr2i
/* 0BA430 800BF9D0 7C60F038 */  and     r0, r3, r30
/* 0BA434 800BF9D4 7C84D038 */  and     r4, r4, r26
/* 0BA438 800BF9D8 7CA0F9D6 */  mullw   r5, r0, r31
/* 0BA43C 800BF9DC 7C64F816 */  mulhwu  r3, r4, r31
/* 0BA440 800BF9E0 7CA51A14 */  add     r5, r5, r3
/* 0BA444 800BF9E4 7C64F1D6 */  mullw   r3, r4, r30
/* 0BA448 800BF9E8 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA44C 800BF9EC 7C80E814 */  addc    r4, r0, r29
/* 0BA450 800BF9F0 7C051A14 */  add     r0, r5, r3
/* 0BA454 800BF9F4 7C60F114 */  adde    r3, r0, r30
/* 0BA458 800BF9F8 38A00010 */  li      r5, 0x10
/* 0BA45C 800BF9FC 4800E391 */  bl      __shr2i
/* 0BA460 800BFA00 7CC3F9D6 */  mullw   r6, r3, r31
/* 0BA464 800BFA04 7CA4F816 */  mulhwu  r5, r4, r31
/* 0BA468 800BFA08 393C0005 */  addi    r9, r28, 5
/* 0BA46C 800BFA0C 7D290734 */  extsh   r9, r9
/* 0BA470 800BFA10 7C1948AE */  lbzx    r0, r25, r9
/* 0BA474 800BFA14 7CC62A14 */  add     r6, r6, r5
/* 0BA478 800BFA18 7CA4F1D6 */  mullw   r5, r4, r30
/* 0BA47C 800BFA1C 7CE40014 */  addc    r7, r4, r0
/* 0BA480 800BFA20 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA484 800BFA24 7CFB49AE */  stbx    r7, r27, r9
/* 0BA488 800BFA28 7C80E814 */  addc    r4, r0, r29
/* 0BA48C 800BFA2C 7C062A14 */  add     r0, r6, r5
/* 0BA490 800BFA30 7C60F114 */  adde    r3, r0, r30
/* 0BA494 800BFA34 38A00010 */  li      r5, 0x10
/* 0BA498 800BFA38 4800E355 */  bl      __shr2i
/* 0BA49C 800BFA3C 7C60F038 */  and     r0, r3, r30
/* 0BA4A0 800BFA40 7C84D038 */  and     r4, r4, r26
/* 0BA4A4 800BFA44 7CA0F9D6 */  mullw   r5, r0, r31
/* 0BA4A8 800BFA48 7C64F816 */  mulhwu  r3, r4, r31
/* 0BA4AC 800BFA4C 7CA51A14 */  add     r5, r5, r3
/* 0BA4B0 800BFA50 7C64F1D6 */  mullw   r3, r4, r30
/* 0BA4B4 800BFA54 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA4B8 800BFA58 7C80E814 */  addc    r4, r0, r29
/* 0BA4BC 800BFA5C 7C051A14 */  add     r0, r5, r3
/* 0BA4C0 800BFA60 7C60F114 */  adde    r3, r0, r30
/* 0BA4C4 800BFA64 38A00010 */  li      r5, 0x10
/* 0BA4C8 800BFA68 4800E325 */  bl      __shr2i
/* 0BA4CC 800BFA6C 7CC3F9D6 */  mullw   r6, r3, r31
/* 0BA4D0 800BFA70 7CA4F816 */  mulhwu  r5, r4, r31
/* 0BA4D4 800BFA74 393C0006 */  addi    r9, r28, 6
/* 0BA4D8 800BFA78 7D290734 */  extsh   r9, r9
/* 0BA4DC 800BFA7C 7C1948AE */  lbzx    r0, r25, r9
/* 0BA4E0 800BFA80 7CC62A14 */  add     r6, r6, r5
/* 0BA4E4 800BFA84 7CA4F1D6 */  mullw   r5, r4, r30
/* 0BA4E8 800BFA88 7CE40014 */  addc    r7, r4, r0
/* 0BA4EC 800BFA8C 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA4F0 800BFA90 7CFB49AE */  stbx    r7, r27, r9
/* 0BA4F4 800BFA94 7C80E814 */  addc    r4, r0, r29
/* 0BA4F8 800BFA98 7C062A14 */  add     r0, r6, r5
/* 0BA4FC 800BFA9C 7C60F114 */  adde    r3, r0, r30
/* 0BA500 800BFAA0 38A00010 */  li      r5, 0x10
/* 0BA504 800BFAA4 4800E2E9 */  bl      __shr2i
/* 0BA508 800BFAA8 7C60F038 */  and     r0, r3, r30
/* 0BA50C 800BFAAC 7C84D038 */  and     r4, r4, r26
/* 0BA510 800BFAB0 7CA0F9D6 */  mullw   r5, r0, r31
/* 0BA514 800BFAB4 7C64F816 */  mulhwu  r3, r4, r31
/* 0BA518 800BFAB8 7CA51A14 */  add     r5, r5, r3
/* 0BA51C 800BFABC 7C64F1D6 */  mullw   r3, r4, r30
/* 0BA520 800BFAC0 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA524 800BFAC4 7C80E814 */  addc    r4, r0, r29
/* 0BA528 800BFAC8 7C051A14 */  add     r0, r5, r3
/* 0BA52C 800BFACC 7C60F114 */  adde    r3, r0, r30
/* 0BA530 800BFAD0 38A00010 */  li      r5, 0x10
/* 0BA534 800BFAD4 4800E2B9 */  bl      __shr2i
/* 0BA538 800BFAD8 7CC3F9D6 */  mullw   r6, r3, r31
/* 0BA53C 800BFADC 7CA4F816 */  mulhwu  r5, r4, r31
/* 0BA540 800BFAE0 393C0007 */  addi    r9, r28, 7
/* 0BA544 800BFAE4 7D290734 */  extsh   r9, r9
/* 0BA548 800BFAE8 7C1948AE */  lbzx    r0, r25, r9
/* 0BA54C 800BFAEC 7CC62A14 */  add     r6, r6, r5
/* 0BA550 800BFAF0 7CA4F1D6 */  mullw   r5, r4, r30
/* 0BA554 800BFAF4 7CE40014 */  addc    r7, r4, r0
/* 0BA558 800BFAF8 7C04F9D6 */  mullw   r0, r4, r31
/* 0BA55C 800BFAFC 7CFB49AE */  stbx    r7, r27, r9
/* 0BA560 800BFB00 7C80E814 */  addc    r4, r0, r29
/* 0BA564 800BFB04 7C062A14 */  add     r0, r6, r5
/* 0BA568 800BFB08 7C60F114 */  adde    r3, r0, r30
/* 0BA56C 800BFB0C 38A00010 */  li      r5, 0x10
/* 0BA570 800BFB10 4800E27D */  bl      __shr2i
/* 0BA574 800BFB14 7C9AD038 */  and     r26, r4, r26
/* 0BA578 800BFB18 7C7EF038 */  and     r30, r3, r30
/* 0BA57C 800BFB1C 3B180008 */  addi    r24, r24, 8
/* 0BA580 800BFB20 3B9C0008 */  addi    r28, r28, 8
lbl_800BFB24:
/* 0BA584 800BFB24 7F800734 */  extsh   r0, r28
/* 0BA588 800BFB28 7C00B800 */  cmpw    r0, r23
/* 0BA58C 800BFB2C 4180FC88 */  blt     lbl_800BF7B4
/* 0BA590 800BFB30 48000218 */  b       lbl_800BFD48
lbl_800BFB34:
/* 0BA594 800BFB34 3C6041C6 */  lis     r3, 0x41c6
/* 0BA598 800BFB38 3B234E6D */  addi    r25, r3, 0x4e6d
/* 0BA59C 800BFB3C 48000080 */  b       lbl_800BFBBC
lbl_800BFB40:
/* 0BA5A0 800BFB40 7CBEC9D6 */  mullw   r5, r30, r25
/* 0BA5A4 800BFB44 7C7AC816 */  mulhwu  r3, r26, r25
/* 0BA5A8 800BFB48 3B000000 */  li      r24, 0
/* 0BA5AC 800BFB4C 7CA51A14 */  add     r5, r5, r3
/* 0BA5B0 800BFB50 7C7AC1D6 */  mullw   r3, r26, r24
/* 0BA5B4 800BFB54 7C1AC9D6 */  mullw   r0, r26, r25
/* 0BA5B8 800BFB58 3AE03039 */  li      r23, 0x3039
/* 0BA5BC 800BFB5C 7C80B814 */  addc    r4, r0, r23
/* 0BA5C0 800BFB60 7C051A14 */  add     r0, r5, r3
/* 0BA5C4 800BFB64 7C60C114 */  adde    r3, r0, r24
/* 0BA5C8 800BFB68 38A00010 */  li      r5, 0x10
/* 0BA5CC 800BFB6C 4800E221 */  bl      __shr2i
/* 0BA5D0 800BFB70 7CC3C9D6 */  mullw   r6, r3, r25
/* 0BA5D4 800BFB74 881D0000 */  lbz     r0, 0(r29)
/* 0BA5D8 800BFB78 7CA4C816 */  mulhwu  r5, r4, r25
/* 0BA5DC 800BFB7C 7CC62A14 */  add     r6, r6, r5
/* 0BA5E0 800BFB80 7D040014 */  addc    r8, r4, r0
/* 0BA5E4 800BFB84 7F870734 */  extsh   r7, r28
/* 0BA5E8 800BFB88 7CA4C1D6 */  mullw   r5, r4, r24
/* 0BA5EC 800BFB8C 7D1B39AE */  stbx    r8, r27, r7
/* 0BA5F0 800BFB90 7C04C9D6 */  mullw   r0, r4, r25
/* 0BA5F4 800BFB94 7C80B814 */  addc    r4, r0, r23
/* 0BA5F8 800BFB98 7C062A14 */  add     r0, r6, r5
/* 0BA5FC 800BFB9C 7C60C114 */  adde    r3, r0, r24
/* 0BA600 800BFBA0 38A00010 */  li      r5, 0x10
/* 0BA604 800BFBA4 4800E1E9 */  bl      __shr2i
/* 0BA608 800BFBA8 38007FFF */  li      r0, 0x7fff
/* 0BA60C 800BFBAC 7C9A0038 */  and     r26, r4, r0
/* 0BA610 800BFBB0 7C7EC038 */  and     r30, r3, r24
/* 0BA614 800BFBB4 3BBD0001 */  addi    r29, r29, 1
/* 0BA618 800BFBB8 3B9C0001 */  addi    r28, r28, 1
lbl_800BFBBC:
/* 0BA61C 800BFBBC 7F800734 */  extsh   r0, r28
/* 0BA620 800BFBC0 2C00000C */  cmpwi   r0, 0xc
/* 0BA624 800BFBC4 4180FF7C */  blt     lbl_800BFB40
/* 0BA628 800BFBC8 38600000 */  li      r3, 0
/* 0BA62C 800BFBCC 4BFE10D9 */  bl      __OSUnlockSramEx
/* 0BA630 800BFBD0 925B001C */  stw     r18, 0x1c(r27)
/* 0BA634 800BFBD4 3A400000 */  li      r18, 0
/* 0BA638 800BFBD8 387B0000 */  addi    r3, r27, 0
/* 0BA63C 800BFBDC 92BB0010 */  stw     r21, 0x10(r27)
/* 0BA640 800BFBE0 38BB01FC */  addi    r5, r27, 0x1fc
/* 0BA644 800BFBE4 38DB01FE */  addi    r6, r27, 0x1fe
/* 0BA648 800BFBE8 929B000C */  stw     r20, 0xc(r27)
/* 0BA64C 800BFBEC 388001FC */  li      r4, 0x1fc
/* 0BA650 800BFBF0 B25B0020 */  sth     r18, 0x20(r27)
/* 0BA654 800BFBF4 80E10018 */  lwz     r7, 0x18(r1)
/* 0BA658 800BFBF8 A0070008 */  lhz     r0, 8(r7)
/* 0BA65C 800BFBFC B01B0022 */  sth     r0, 0x22(r27)
/* 0BA660 800BFC00 4BFFDFA1 */  bl      __CARDCheckSum
/* 0BA664 800BFC04 4800004C */  b       lbl_800BFC50
lbl_800BFC08:
/* 0BA668 800BFC08 80810018 */  lwz     r4, 0x18(r1)
/* 0BA66C 800BFC0C 7E430734 */  extsh   r3, r18
/* 0BA670 800BFC10 38030001 */  addi    r0, r3, 1
/* 0BA674 800BFC14 80640080 */  lwz     r3, 0x80(r4)
/* 0BA678 800BFC18 54006824 */  slwi    r0, r0, 0xd
/* 0BA67C 800BFC1C 388000FF */  li      r4, 0xff
/* 0BA680 800BFC20 7E830214 */  add     r20, r3, r0
/* 0BA684 800BFC24 38740000 */  addi    r3, r20, 0
/* 0BA688 800BFC28 38A02000 */  li      r5, 0x2000
/* 0BA68C 800BFC2C 4BF457A5 */  bl      memset
/* 0BA690 800BFC30 38941FC0 */  addi    r4, r20, 0x1fc0
/* 0BA694 800BFC34 B2541FFA */  sth     r18, 0x1ffa(r20)
/* 0BA698 800BFC38 38740000 */  addi    r3, r20, 0
/* 0BA69C 800BFC3C 38A4003C */  addi    r5, r4, 0x3c
/* 0BA6A0 800BFC40 38C4003E */  addi    r6, r4, 0x3e
/* 0BA6A4 800BFC44 38801FFC */  li      r4, 0x1ffc
/* 0BA6A8 800BFC48 4BFFDF59 */  bl      __CARDCheckSum
/* 0BA6AC 800BFC4C 3A520001 */  addi    r18, r18, 1
lbl_800BFC50:
/* 0BA6B0 800BFC50 7E400734 */  extsh   r0, r18
/* 0BA6B4 800BFC54 2C000002 */  cmpwi   r0, 2
/* 0BA6B8 800BFC58 4180FFB0 */  blt     lbl_800BFC08
/* 0BA6BC 800BFC5C 3A400000 */  li      r18, 0
/* 0BA6C0 800BFC60 48000060 */  b       lbl_800BFCC0
lbl_800BFC64:
/* 0BA6C4 800BFC64 80810018 */  lwz     r4, 0x18(r1)
/* 0BA6C8 800BFC68 7E430734 */  extsh   r3, r18
/* 0BA6CC 800BFC6C 38030003 */  addi    r0, r3, 3
/* 0BA6D0 800BFC70 80640080 */  lwz     r3, 0x80(r4)
/* 0BA6D4 800BFC74 54006824 */  slwi    r0, r0, 0xd
/* 0BA6D8 800BFC78 38800000 */  li      r4, 0
/* 0BA6DC 800BFC7C 7E830214 */  add     r20, r3, r0
/* 0BA6E0 800BFC80 38740000 */  addi    r3, r20, 0
/* 0BA6E4 800BFC84 38A02000 */  li      r5, 0x2000
/* 0BA6E8 800BFC88 4BF45749 */  bl      memset
/* 0BA6EC 800BFC8C B2540004 */  sth     r18, 4(r20)
/* 0BA6F0 800BFC90 38000004 */  li      r0, 4
/* 0BA6F4 800BFC94 38B40000 */  addi    r5, r20, 0
/* 0BA6F8 800BFC98 80810018 */  lwz     r4, 0x18(r1)
/* 0BA6FC 800BFC9C 38740004 */  addi    r3, r20, 4
/* 0BA700 800BFCA0 38D40002 */  addi    r6, r20, 2
/* 0BA704 800BFCA4 A0E40010 */  lhz     r7, 0x10(r4)
/* 0BA708 800BFCA8 38801FFC */  li      r4, 0x1ffc
/* 0BA70C 800BFCAC 38E7FFFB */  addi    r7, r7, -5
/* 0BA710 800BFCB0 B0F40006 */  sth     r7, 6(r20)
/* 0BA714 800BFCB4 B0140008 */  sth     r0, 8(r20)
/* 0BA718 800BFCB8 4BFFDEE9 */  bl      __CARDCheckSum
/* 0BA71C 800BFCBC 3A520001 */  addi    r18, r18, 1
lbl_800BFCC0:
/* 0BA720 800BFCC0 7E400734 */  extsh   r0, r18
/* 0BA724 800BFCC4 2C000002 */  cmpwi   r0, 2
/* 0BA728 800BFCC8 4180FF9C */  blt     lbl_800BFC64
/* 0BA72C 800BFCCC 28130000 */  cmplwi  r19, 0
/* 0BA730 800BFCD0 4182000C */  beq     lbl_800BFCDC
/* 0BA734 800BFCD4 7E609B78 */  mr      r0, r19
/* 0BA738 800BFCD8 4800000C */  b       lbl_800BFCE4
lbl_800BFCDC:
/* 0BA73C 800BFCDC 3C60800C */  lis     r3, __CARDDefaultApiCallback@ha
/* 0BA740 800BFCE0 3803AD5C */  addi    r0, r3, __CARDDefaultApiCallback@l
lbl_800BFCE4:
/* 0BA744 800BFCE4 80A10018 */  lwz     r5, 0x18(r1)
/* 0BA748 800BFCE8 3C600001 */  lis     r3, 1
/* 0BA74C 800BFCEC 3883A000 */  addi    r4, r3, -24576
/* 0BA750 800BFCF0 900500D0 */  stw     r0, 0xd0(r5)
/* 0BA754 800BFCF4 80610018 */  lwz     r3, 0x18(r1)
/* 0BA758 800BFCF8 80630080 */  lwz     r3, 0x80(r3)
/* 0BA75C 800BFCFC 4BFDDAB1 */  bl      DCStoreRange
/* 0BA760 800BFD00 80810018 */  lwz     r4, 0x18(r1)
/* 0BA764 800BFD04 38000000 */  li      r0, 0
/* 0BA768 800BFD08 3C60800C */  lis     r3, FormatCallback@ha
/* 0BA76C 800BFD0C 90040028 */  stw     r0, 0x28(r4)
/* 0BA770 800BFD10 38A3F5C8 */  addi    r5, r3, FormatCallback@l
/* 0BA774 800BFD14 38760000 */  addi    r3, r22, 0
/* 0BA778 800BFD18 80C10018 */  lwz     r6, 0x18(r1)
/* 0BA77C 800BFD1C 8086000C */  lwz     r4, 0xc(r6)
/* 0BA780 800BFD20 80060028 */  lwz     r0, 0x28(r6)
/* 0BA784 800BFD24 7C8401D6 */  mullw   r4, r4, r0
/* 0BA788 800BFD28 4BFFBDC9 */  bl      __CARDEraseSector
/* 0BA78C 800BFD2C 7C721B79 */  or.     r18, r3, r3
/* 0BA790 800BFD30 40800010 */  bge     lbl_800BFD40
/* 0BA794 800BFD34 80610018 */  lwz     r3, 0x18(r1)
/* 0BA798 800BFD38 7E449378 */  mr      r4, r18
/* 0BA79C 800BFD3C 4BFFC039 */  bl      __CARDPutControlBlock
lbl_800BFD40:
/* 0BA7A0 800BFD40 7E439378 */  mr      r3, r18
/* 0BA7A4 800BFD44 4800000C */  b       lbl_800BFD50
lbl_800BFD48:
/* 0BA7A8 800BFD48 7FB90214 */  add     r29, r25, r0
/* 0BA7AC 800BFD4C 4BFFFDE8 */  b       lbl_800BFB34
lbl_800BFD50:
/* 0BA7B0 800BFD50 BA410020 */  lmw     r18, 0x20(r1)
/* 0BA7B4 800BFD54 8001005C */  lwz     r0, 0x5c(r1)
/* 0BA7B8 800BFD58 38210058 */  addi    r1, r1, 0x58
/* 0BA7BC 800BFD5C 7C0803A6 */  mtlr    r0
/* 0BA7C0 800BFD60 4E800020 */  blr     

glabel CARDFormatAsync
/* 0BA7C4 800BFD64 7C0802A6 */  mflr    r0
/* 0BA7C8 800BFD68 90010004 */  stw     r0, 4(r1)
/* 0BA7CC 800BFD6C 9421FFE8 */  stwu    r1, -0x18(r1)
/* 0BA7D0 800BFD70 93E10014 */  stw     r31, 0x14(r1)
/* 0BA7D4 800BFD74 3BE40000 */  addi    r31, r4, 0
/* 0BA7D8 800BFD78 93C10010 */  stw     r30, 0x10(r1)
/* 0BA7DC 800BFD7C 3BC30000 */  addi    r30, r3, 0
/* 0BA7E0 800BFD80 4BFFBEFD */  bl      __CARDGetFontEncode
/* 0BA7E4 800BFD84 38830000 */  addi    r4, r3, 0
/* 0BA7E8 800BFD88 387E0000 */  addi    r3, r30, 0
/* 0BA7EC 800BFD8C 38BF0000 */  addi    r5, r31, 0
/* 0BA7F0 800BFD90 4BFFF97D */  bl      __CARDFormatRegionAsync
/* 0BA7F4 800BFD94 8001001C */  lwz     r0, 0x1c(r1)
/* 0BA7F8 800BFD98 83E10014 */  lwz     r31, 0x14(r1)
/* 0BA7FC 800BFD9C 83C10010 */  lwz     r30, 0x10(r1)
/* 0BA800 800BFDA0 38210018 */  addi    r1, r1, 0x18
/* 0BA804 800BFDA4 7C0803A6 */  mtlr    r0
/* 0BA808 800BFDA8 4E800020 */  blr     
