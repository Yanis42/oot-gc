# OSAlarm.c
.include "macros.inc"

.section .text, "ax"

.balign 4

glabel OSInitAlarm
/* 09711C 8009C6BC 7C0802A6 */  mflr    r0
/* 097120 8009C6C0 38600008 */  li      r3, 8
/* 097124 8009C6C4 90010004 */  stw     r0, 4(r1)
/* 097128 8009C6C8 9421FFF8 */  stwu    r1, -8(r1)
/* 09712C 8009C6CC 4BFFFE55 */  bl      __OSGetExceptionHandler
/* 097130 8009C6D0 3C80800A */  lis     r4, DecrementerExceptionHandler@ha
/* 097134 8009C6D4 3884CD28 */  addi    r4, r4, DecrementerExceptionHandler@l
/* 097138 8009C6D8 7C032040 */  cmplw   r3, r4
/* 09713C 8009C6DC 41820028 */  beq     lbl_8009C704
/* 097140 8009C6E0 38000000 */  li      r0, 0
/* 097144 8009C6E4 386D8B10 */  addi    r3, r13, AlarmQueue@sda21
/* 097148 8009C6E8 90030004 */  stw     r0, 4(r3)
/* 09714C 8009C6EC 38600008 */  li      r3, 8
/* 097150 8009C6F0 900D8B10 */  stw     r0, AlarmQueue@sda21(r13)
/* 097154 8009C6F4 4BFFFE11 */  bl      __OSSetExceptionHandler
/* 097158 8009C6F8 3C60800F */  lis     r3, ResetFunctionInfo@ha
/* 09715C 8009C6FC 38630820 */  addi    r3, r3, ResetFunctionInfo@l
/* 097160 8009C700 48003729 */  bl      OSRegisterResetFunction
lbl_8009C704:
/* 097164 8009C704 8001000C */  lwz     r0, 0xc(r1)
/* 097168 8009C708 38210008 */  addi    r1, r1, 8
/* 09716C 8009C70C 7C0803A6 */  mtlr    r0
/* 097170 8009C710 4E800020 */  blr     

glabel OSCreateAlarm
/* 097174 8009C714 38000000 */  li      r0, 0
/* 097178 8009C718 90030000 */  stw     r0, 0(r3)
/* 09717C 8009C71C 90030004 */  stw     r0, 4(r3)
/* 097180 8009C720 4E800020 */  blr     

InsertAlarm:
/* 097184 8009C724 7C0802A6 */  mflr    r0
/* 097188 8009C728 90010004 */  stw     r0, 4(r1)
/* 09718C 8009C72C 9421FFC0 */  stwu    r1, -0x40(r1)
/* 097190 8009C730 BF210024 */  stmw    r25, 0x24(r1)
/* 097194 8009C734 3B800000 */  li      r28, 0
/* 097198 8009C738 7C7D1B78 */  mr      r29, r3
/* 09719C 8009C73C 6F848000 */  xoris   r4, r28, 0x8000
/* 0971A0 8009C740 3B250000 */  addi    r25, r5, 0
/* 0971A4 8009C744 3BC60000 */  addi    r30, r6, 0
/* 0971A8 8009C748 3BE70000 */  addi    r31, r7, 0
/* 0971AC 8009C74C 80030018 */  lwz     r0, 0x18(r3)
/* 0971B0 8009C750 8103001C */  lwz     r8, 0x1c(r3)
/* 0971B4 8009C754 6C038000 */  xoris   r3, r0, 0x8000
/* 0971B8 8009C758 7C08E010 */  subfc   r0, r8, r28
/* 0971BC 8009C75C 7C632110 */  subfe   r3, r3, r4
/* 0971C0 8009C760 7C642110 */  subfe   r3, r4, r4
/* 0971C4 8009C764 7C6300D1 */  neg.    r3, r3
/* 0971C8 8009C768 4182007C */  beq     lbl_8009C7E4
/* 0971CC 8009C76C 48005B5D */  bl      __OSGetSystemTime
/* 0971D0 8009C770 80FD0020 */  lwz     r7, 0x20(r29)
/* 0971D4 8009C774 6C658000 */  xoris   r5, r3, 0x8000
/* 0971D8 8009C778 811D0024 */  lwz     r8, 0x24(r29)
/* 0971DC 8009C77C 6CE68000 */  xoris   r6, r7, 0x8000
/* 0971E0 8009C780 7C044010 */  subfc   r0, r4, r8
/* 0971E4 8009C784 7CA53110 */  subfe   r5, r5, r6
/* 0971E8 8009C788 7CA63110 */  subfe   r5, r6, r6
/* 0971EC 8009C78C 7CA500D1 */  neg.    r5, r5
/* 0971F0 8009C790 3BC80000 */  addi    r30, r8, 0
/* 0971F4 8009C794 3B270000 */  addi    r25, r7, 0
/* 0971F8 8009C798 4182004C */  beq     lbl_8009C7E4
/* 0971FC 8009C79C 837D0018 */  lwz     r27, 0x18(r29)
/* 097200 8009C7A0 7C882010 */  subfc   r4, r8, r4
/* 097204 8009C7A4 835D001C */  lwz     r26, 0x1c(r29)
/* 097208 8009C7A8 7C671910 */  subfe   r3, r7, r3
/* 09720C 8009C7AC 38BB0000 */  addi    r5, r27, 0
/* 097210 8009C7B0 38DA0000 */  addi    r6, r26, 0
/* 097214 8009C7B4 48031269 */  bl      __div2i
/* 097218 8009C7B8 38000001 */  li      r0, 1
/* 09721C 8009C7BC 7CA40014 */  addc    r5, r4, r0
/* 097220 8009C7C0 7C9B29D6 */  mullw   r4, r27, r5
/* 097224 8009C7C4 7C1A2816 */  mulhwu  r0, r26, r5
/* 097228 8009C7C8 7C63E114 */  adde    r3, r3, r28
/* 09722C 8009C7CC 7C840214 */  add     r4, r4, r0
/* 097230 8009C7D0 7C1A19D6 */  mullw   r0, r26, r3
/* 097234 8009C7D4 7C7A29D6 */  mullw   r3, r26, r5
/* 097238 8009C7D8 7C040214 */  add     r0, r4, r0
/* 09723C 8009C7DC 7FDE1814 */  addc    r30, r30, r3
/* 097240 8009C7E0 7F390114 */  adde    r25, r25, r0
lbl_8009C7E4:
/* 097244 8009C7E4 93FD0000 */  stw     r31, 0(r29)
/* 097248 8009C7E8 6F248000 */  xoris   r4, r25, 0x8000
/* 09724C 8009C7EC 93DD000C */  stw     r30, 0xc(r29)
/* 097250 8009C7F0 933D0008 */  stw     r25, 8(r29)
/* 097254 8009C7F4 80CD8B10 */  lwz     r6, AlarmQueue@sda21(r13)
/* 097258 8009C7F8 480000C4 */  b       lbl_8009C8BC
lbl_8009C7FC:
/* 09725C 8009C7FC 80060008 */  lwz     r0, 8(r6)
/* 097260 8009C800 80A6000C */  lwz     r5, 0xc(r6)
/* 097264 8009C804 6C038000 */  xoris   r3, r0, 0x8000
/* 097268 8009C808 7C05F010 */  subfc   r0, r5, r30
/* 09726C 8009C80C 7C632110 */  subfe   r3, r3, r4
/* 097270 8009C810 7C642110 */  subfe   r3, r4, r4
/* 097274 8009C814 7C6300D1 */  neg.    r3, r3
/* 097278 8009C818 418200A0 */  beq     lbl_8009C8B8
/* 09727C 8009C81C 80060010 */  lwz     r0, 0x10(r6)
/* 097280 8009C820 901D0010 */  stw     r0, 0x10(r29)
/* 097284 8009C824 93A60010 */  stw     r29, 0x10(r6)
/* 097288 8009C828 90DD0014 */  stw     r6, 0x14(r29)
/* 09728C 8009C82C 807D0010 */  lwz     r3, 0x10(r29)
/* 097290 8009C830 28030000 */  cmplwi  r3, 0
/* 097294 8009C834 4182000C */  beq     lbl_8009C840
/* 097298 8009C838 93A30014 */  stw     r29, 0x14(r3)
/* 09729C 8009C83C 48000124 */  b       lbl_8009C960
lbl_8009C840:
/* 0972A0 8009C840 93AD8B10 */  stw     r29, AlarmQueue@sda21(r13)
/* 0972A4 8009C844 48005A85 */  bl      __OSGetSystemTime
/* 0972A8 8009C848 80DD000C */  lwz     r6, 0xc(r29)
/* 0972AC 8009C84C 38E00000 */  li      r7, 0
/* 0972B0 8009C850 801D0008 */  lwz     r0, 8(r29)
/* 0972B4 8009C854 6CE58000 */  xoris   r5, r7, 0x8000
/* 0972B8 8009C858 7D043010 */  subfc   r8, r4, r6
/* 0972BC 8009C85C 7C030110 */  subfe   r0, r3, r0
/* 0972C0 8009C860 6C068000 */  xoris   r6, r0, 0x8000
/* 0972C4 8009C864 7C074010 */  subfc   r0, r7, r8
/* 0972C8 8009C868 7CA53110 */  subfe   r5, r5, r6
/* 0972CC 8009C86C 7CA63110 */  subfe   r5, r6, r6
/* 0972D0 8009C870 7CA500D1 */  neg.    r5, r5
/* 0972D4 8009C874 41820010 */  beq     lbl_8009C884
/* 0972D8 8009C878 38600000 */  li      r3, 0
/* 0972DC 8009C87C 4BFFF271 */  bl      PPCMtdec
/* 0972E0 8009C880 480000E0 */  b       lbl_8009C960
lbl_8009C884:
/* 0972E4 8009C884 3C808000 */  lis     r4, 0x8000
/* 0972E8 8009C888 6CE38000 */  xoris   r3, r7, 0x8000
/* 0972EC 8009C88C 7C044010 */  subfc   r0, r4, r8
/* 0972F0 8009C890 7C633110 */  subfe   r3, r3, r6
/* 0972F4 8009C894 7C663110 */  subfe   r3, r6, r6
/* 0972F8 8009C898 7C6300D1 */  neg.    r3, r3
/* 0972FC 8009C89C 41820010 */  beq     lbl_8009C8AC
/* 097300 8009C8A0 7D034378 */  mr      r3, r8
/* 097304 8009C8A4 4BFFF249 */  bl      PPCMtdec
/* 097308 8009C8A8 480000B8 */  b       lbl_8009C960
lbl_8009C8AC:
/* 09730C 8009C8AC 3864FFFF */  addi    r3, r4, -1
/* 097310 8009C8B0 4BFFF23D */  bl      PPCMtdec
/* 097314 8009C8B4 480000AC */  b       lbl_8009C960
lbl_8009C8B8:
/* 097318 8009C8B8 80C60014 */  lwz     r6, 0x14(r6)
lbl_8009C8BC:
/* 09731C 8009C8BC 28060000 */  cmplwi  r6, 0
/* 097320 8009C8C0 4082FF3C */  bne     lbl_8009C7FC
/* 097324 8009C8C4 3BC00000 */  li      r30, 0
/* 097328 8009C8C8 93DD0014 */  stw     r30, 0x14(r29)
/* 09732C 8009C8CC 386D8B10 */  addi    r3, r13, AlarmQueue@sda21
/* 097330 8009C8D0 80830004 */  lwz     r4, 4(r3)
/* 097334 8009C8D4 97A30004 */  stwu    r29, 4(r3)
/* 097338 8009C8D8 28040000 */  cmplwi  r4, 0
/* 09733C 8009C8DC 909D0010 */  stw     r4, 0x10(r29)
/* 097340 8009C8E0 4182000C */  beq     lbl_8009C8EC
/* 097344 8009C8E4 93A40014 */  stw     r29, 0x14(r4)
/* 097348 8009C8E8 48000078 */  b       lbl_8009C960
lbl_8009C8EC:
/* 09734C 8009C8EC 93A30000 */  stw     r29, 0(r3)
/* 097350 8009C8F0 93AD8B10 */  stw     r29, AlarmQueue@sda21(r13)
/* 097354 8009C8F4 480059D5 */  bl      __OSGetSystemTime
/* 097358 8009C8F8 80DD000C */  lwz     r6, 0xc(r29)
/* 09735C 8009C8FC 6FC58000 */  xoris   r5, r30, 0x8000
/* 097360 8009C900 801D0008 */  lwz     r0, 8(r29)
/* 097364 8009C904 7CE43010 */  subfc   r7, r4, r6
/* 097368 8009C908 7C030110 */  subfe   r0, r3, r0
/* 09736C 8009C90C 6C068000 */  xoris   r6, r0, 0x8000
/* 097370 8009C910 7C1E3810 */  subfc   r0, r30, r7
/* 097374 8009C914 7CA53110 */  subfe   r5, r5, r6
/* 097378 8009C918 7CA63110 */  subfe   r5, r6, r6
/* 09737C 8009C91C 7CA500D1 */  neg.    r5, r5
/* 097380 8009C920 41820010 */  beq     lbl_8009C930
/* 097384 8009C924 38600000 */  li      r3, 0
/* 097388 8009C928 4BFFF1C5 */  bl      PPCMtdec
/* 09738C 8009C92C 48000034 */  b       lbl_8009C960
lbl_8009C930:
/* 097390 8009C930 3C808000 */  lis     r4, 0x8000
/* 097394 8009C934 6FC38000 */  xoris   r3, r30, 0x8000
/* 097398 8009C938 7C043810 */  subfc   r0, r4, r7
/* 09739C 8009C93C 7C633110 */  subfe   r3, r3, r6
/* 0973A0 8009C940 7C663110 */  subfe   r3, r6, r6
/* 0973A4 8009C944 7C6300D1 */  neg.    r3, r3
/* 0973A8 8009C948 41820010 */  beq     lbl_8009C958
/* 0973AC 8009C94C 7CE33B78 */  mr      r3, r7
/* 0973B0 8009C950 4BFFF19D */  bl      PPCMtdec
/* 0973B4 8009C954 4800000C */  b       lbl_8009C960
lbl_8009C958:
/* 0973B8 8009C958 3864FFFF */  addi    r3, r4, -1
/* 0973BC 8009C95C 4BFFF191 */  bl      PPCMtdec
lbl_8009C960:
/* 0973C0 8009C960 BB210024 */  lmw     r25, 0x24(r1)
/* 0973C4 8009C964 80010044 */  lwz     r0, 0x44(r1)
/* 0973C8 8009C968 38210040 */  addi    r1, r1, 0x40
/* 0973CC 8009C96C 7C0803A6 */  mtlr    r0
/* 0973D0 8009C970 4E800020 */  blr     

glabel OSSetAlarm
/* 0973D4 8009C974 7C0802A6 */  mflr    r0
/* 0973D8 8009C978 90010004 */  stw     r0, 4(r1)
/* 0973DC 8009C97C 9421FFC8 */  stwu    r1, -0x38(r1)
/* 0973E0 8009C980 BF610024 */  stmw    r27, 0x24(r1)
/* 0973E4 8009C984 3B630000 */  addi    r27, r3, 0
/* 0973E8 8009C988 3BA50000 */  addi    r29, r5, 0
/* 0973EC 8009C98C 3B860000 */  addi    r28, r6, 0
/* 0973F0 8009C990 3BC70000 */  addi    r30, r7, 0
/* 0973F4 8009C994 48002369 */  bl      OSDisableInterrupts
/* 0973F8 8009C998 38000000 */  li      r0, 0
/* 0973FC 8009C99C 901B001C */  stw     r0, 0x1c(r27)
/* 097400 8009C9A0 7C7F1B78 */  mr      r31, r3
/* 097404 8009C9A4 901B0018 */  stw     r0, 0x18(r27)
/* 097408 8009C9A8 48005921 */  bl      __OSGetSystemTime
/* 09740C 8009C9AC 7CDC2014 */  addc    r6, r28, r4
/* 097410 8009C9B0 7CBD1914 */  adde    r5, r29, r3
/* 097414 8009C9B4 387B0000 */  addi    r3, r27, 0
/* 097418 8009C9B8 38FE0000 */  addi    r7, r30, 0
/* 09741C 8009C9BC 4BFFFD69 */  bl      InsertAlarm
/* 097420 8009C9C0 7FE3FB78 */  mr      r3, r31
/* 097424 8009C9C4 48002361 */  bl      OSRestoreInterrupts
/* 097428 8009C9C8 BB610024 */  lmw     r27, 0x24(r1)
/* 09742C 8009C9CC 8001003C */  lwz     r0, 0x3c(r1)
/* 097430 8009C9D0 38210038 */  addi    r1, r1, 0x38
/* 097434 8009C9D4 7C0803A6 */  mtlr    r0
/* 097438 8009C9D8 4E800020 */  blr     

glabel OSCancelAlarm
/* 09743C 8009C9DC 7C0802A6 */  mflr    r0
/* 097440 8009C9E0 90010004 */  stw     r0, 4(r1)
/* 097444 8009C9E4 9421FFE0 */  stwu    r1, -0x20(r1)
/* 097448 8009C9E8 93E1001C */  stw     r31, 0x1c(r1)
/* 09744C 8009C9EC 93C10018 */  stw     r30, 0x18(r1)
/* 097450 8009C9F0 7C7E1B78 */  mr      r30, r3
/* 097454 8009C9F4 93A10014 */  stw     r29, 0x14(r1)
/* 097458 8009C9F8 48002305 */  bl      OSDisableInterrupts
/* 09745C 8009C9FC 801E0000 */  lwz     r0, 0(r30)
/* 097460 8009CA00 3BE30000 */  addi    r31, r3, 0
/* 097464 8009CA04 28000000 */  cmplwi  r0, 0
/* 097468 8009CA08 40820010 */  bne     lbl_8009CA18
/* 09746C 8009CA0C 7FE3FB78 */  mr      r3, r31
/* 097470 8009CA10 48002315 */  bl      OSRestoreInterrupts
/* 097474 8009CA14 480000C8 */  b       lbl_8009CADC
lbl_8009CA18:
/* 097478 8009CA18 83BE0014 */  lwz     r29, 0x14(r30)
/* 09747C 8009CA1C 281D0000 */  cmplwi  r29, 0
/* 097480 8009CA20 40820014 */  bne     lbl_8009CA34
/* 097484 8009CA24 801E0010 */  lwz     r0, 0x10(r30)
/* 097488 8009CA28 386D8B10 */  addi    r3, r13, AlarmQueue@sda21
/* 09748C 8009CA2C 90030004 */  stw     r0, 4(r3)
/* 097490 8009CA30 4800000C */  b       lbl_8009CA3C
lbl_8009CA34:
/* 097494 8009CA34 801E0010 */  lwz     r0, 0x10(r30)
/* 097498 8009CA38 901D0010 */  stw     r0, 0x10(r29)
lbl_8009CA3C:
/* 09749C 8009CA3C 807E0010 */  lwz     r3, 0x10(r30)
/* 0974A0 8009CA40 28030000 */  cmplwi  r3, 0
/* 0974A4 8009CA44 4182000C */  beq     lbl_8009CA50
/* 0974A8 8009CA48 93A30014 */  stw     r29, 0x14(r3)
/* 0974AC 8009CA4C 48000080 */  b       lbl_8009CACC
lbl_8009CA50:
/* 0974B0 8009CA50 281D0000 */  cmplwi  r29, 0
/* 0974B4 8009CA54 93AD8B10 */  stw     r29, AlarmQueue@sda21(r13)
/* 0974B8 8009CA58 41820074 */  beq     lbl_8009CACC
/* 0974BC 8009CA5C 4800586D */  bl      __OSGetSystemTime
/* 0974C0 8009CA60 80DD000C */  lwz     r6, 0xc(r29)
/* 0974C4 8009CA64 38E00000 */  li      r7, 0
/* 0974C8 8009CA68 801D0008 */  lwz     r0, 8(r29)
/* 0974CC 8009CA6C 6CE58000 */  xoris   r5, r7, 0x8000
/* 0974D0 8009CA70 7D043010 */  subfc   r8, r4, r6
/* 0974D4 8009CA74 7C030110 */  subfe   r0, r3, r0
/* 0974D8 8009CA78 6C068000 */  xoris   r6, r0, 0x8000
/* 0974DC 8009CA7C 7C074010 */  subfc   r0, r7, r8
/* 0974E0 8009CA80 7CA53110 */  subfe   r5, r5, r6
/* 0974E4 8009CA84 7CA63110 */  subfe   r5, r6, r6
/* 0974E8 8009CA88 7CA500D1 */  neg.    r5, r5
/* 0974EC 8009CA8C 41820010 */  beq     lbl_8009CA9C
/* 0974F0 8009CA90 38600000 */  li      r3, 0
/* 0974F4 8009CA94 4BFFF059 */  bl      PPCMtdec
/* 0974F8 8009CA98 48000034 */  b       lbl_8009CACC
lbl_8009CA9C:
/* 0974FC 8009CA9C 3C808000 */  lis     r4, 0x8000
/* 097500 8009CAA0 6CE38000 */  xoris   r3, r7, 0x8000
/* 097504 8009CAA4 7C044010 */  subfc   r0, r4, r8
/* 097508 8009CAA8 7C633110 */  subfe   r3, r3, r6
/* 09750C 8009CAAC 7C663110 */  subfe   r3, r6, r6
/* 097510 8009CAB0 7C6300D1 */  neg.    r3, r3
/* 097514 8009CAB4 41820010 */  beq     lbl_8009CAC4
/* 097518 8009CAB8 7D034378 */  mr      r3, r8
/* 09751C 8009CABC 4BFFF031 */  bl      PPCMtdec
/* 097520 8009CAC0 4800000C */  b       lbl_8009CACC
lbl_8009CAC4:
/* 097524 8009CAC4 3864FFFF */  addi    r3, r4, -1
/* 097528 8009CAC8 4BFFF025 */  bl      PPCMtdec
lbl_8009CACC:
/* 09752C 8009CACC 38000000 */  li      r0, 0
/* 097530 8009CAD0 901E0000 */  stw     r0, 0(r30)
/* 097534 8009CAD4 7FE3FB78 */  mr      r3, r31
/* 097538 8009CAD8 4800224D */  bl      OSRestoreInterrupts
lbl_8009CADC:
/* 09753C 8009CADC 80010024 */  lwz     r0, 0x24(r1)
/* 097540 8009CAE0 83E1001C */  lwz     r31, 0x1c(r1)
/* 097544 8009CAE4 83C10018 */  lwz     r30, 0x18(r1)
/* 097548 8009CAE8 83A10014 */  lwz     r29, 0x14(r1)
/* 09754C 8009CAEC 38210020 */  addi    r1, r1, 0x20
/* 097550 8009CAF0 7C0803A6 */  mtlr    r0
/* 097554 8009CAF4 4E800020 */  blr     

DecrementerExceptionCallback:
/* 097558 8009CAF8 7C0802A6 */  mflr    r0
/* 09755C 8009CAFC 90010004 */  stw     r0, 4(r1)
/* 097560 8009CB00 9421FD10 */  stwu    r1, -0x2f0(r1)
/* 097564 8009CB04 93E102EC */  stw     r31, 0x2ec(r1)
/* 097568 8009CB08 93C102E8 */  stw     r30, 0x2e8(r1)
/* 09756C 8009CB0C 93A102E4 */  stw     r29, 0x2e4(r1)
/* 097570 8009CB10 7C9D2378 */  mr      r29, r4
/* 097574 8009CB14 938102E0 */  stw     r28, 0x2e0(r1)
/* 097578 8009CB18 480057B1 */  bl      __OSGetSystemTime
/* 09757C 8009CB1C 800D8B10 */  lwz     r0, AlarmQueue@sda21(r13)
/* 097580 8009CB20 3B840000 */  addi    r28, r4, 0
/* 097584 8009CB24 3BC30000 */  addi    r30, r3, 0
/* 097588 8009CB28 28000000 */  cmplwi  r0, 0
/* 09758C 8009CB2C 7C1F0378 */  mr      r31, r0
/* 097590 8009CB30 4082000C */  bne     lbl_8009CB3C
/* 097594 8009CB34 7FA3EB78 */  mr      r3, r29
/* 097598 8009CB38 4800158D */  bl      OSLoadContext
lbl_8009CB3C:
/* 09759C 8009CB3C 801F0008 */  lwz     r0, 8(r31)
/* 0975A0 8009CB40 6FC48000 */  xoris   r4, r30, 0x8000
/* 0975A4 8009CB44 80BF000C */  lwz     r5, 0xc(r31)
/* 0975A8 8009CB48 6C038000 */  xoris   r3, r0, 0x8000
/* 0975AC 8009CB4C 7C05E010 */  subfc   r0, r5, r28
/* 0975B0 8009CB50 7C632110 */  subfe   r3, r3, r4
/* 0975B4 8009CB54 7C642110 */  subfe   r3, r4, r4
/* 0975B8 8009CB58 7C6300D1 */  neg.    r3, r3
/* 0975BC 8009CB5C 4182007C */  beq     lbl_8009CBD8
/* 0975C0 8009CB60 48005769 */  bl      __OSGetSystemTime
/* 0975C4 8009CB64 80DF000C */  lwz     r6, 0xc(r31)
/* 0975C8 8009CB68 38E00000 */  li      r7, 0
/* 0975CC 8009CB6C 801F0008 */  lwz     r0, 8(r31)
/* 0975D0 8009CB70 6CE58000 */  xoris   r5, r7, 0x8000
/* 0975D4 8009CB74 7D043010 */  subfc   r8, r4, r6
/* 0975D8 8009CB78 7C030110 */  subfe   r0, r3, r0
/* 0975DC 8009CB7C 6C068000 */  xoris   r6, r0, 0x8000
/* 0975E0 8009CB80 7C074010 */  subfc   r0, r7, r8
/* 0975E4 8009CB84 7CA53110 */  subfe   r5, r5, r6
/* 0975E8 8009CB88 7CA63110 */  subfe   r5, r6, r6
/* 0975EC 8009CB8C 7CA500D1 */  neg.    r5, r5
/* 0975F0 8009CB90 41820010 */  beq     lbl_8009CBA0
/* 0975F4 8009CB94 38600000 */  li      r3, 0
/* 0975F8 8009CB98 4BFFEF55 */  bl      PPCMtdec
/* 0975FC 8009CB9C 48000034 */  b       lbl_8009CBD0
lbl_8009CBA0:
/* 097600 8009CBA0 3C808000 */  lis     r4, 0x8000
/* 097604 8009CBA4 6CE38000 */  xoris   r3, r7, 0x8000
/* 097608 8009CBA8 7C044010 */  subfc   r0, r4, r8
/* 09760C 8009CBAC 7C633110 */  subfe   r3, r3, r6
/* 097610 8009CBB0 7C663110 */  subfe   r3, r6, r6
/* 097614 8009CBB4 7C6300D1 */  neg.    r3, r3
/* 097618 8009CBB8 41820010 */  beq     lbl_8009CBC8
/* 09761C 8009CBBC 7D034378 */  mr      r3, r8
/* 097620 8009CBC0 4BFFEF2D */  bl      PPCMtdec
/* 097624 8009CBC4 4800000C */  b       lbl_8009CBD0
lbl_8009CBC8:
/* 097628 8009CBC8 3864FFFF */  addi    r3, r4, -1
/* 09762C 8009CBCC 4BFFEF21 */  bl      PPCMtdec
lbl_8009CBD0:
/* 097630 8009CBD0 7FA3EB78 */  mr      r3, r29
/* 097634 8009CBD4 480014F1 */  bl      OSLoadContext
lbl_8009CBD8:
/* 097638 8009CBD8 807F0014 */  lwz     r3, 0x14(r31)
/* 09763C 8009CBDC 28030000 */  cmplwi  r3, 0
/* 097640 8009CBE0 906D8B10 */  stw     r3, AlarmQueue@sda21(r13)
/* 097644 8009CBE4 40820014 */  bne     lbl_8009CBF8
/* 097648 8009CBE8 38000000 */  li      r0, 0
/* 09764C 8009CBEC 386D8B10 */  addi    r3, r13, AlarmQueue@sda21
/* 097650 8009CBF0 90030004 */  stw     r0, 4(r3)
/* 097654 8009CBF4 4800000C */  b       lbl_8009CC00
lbl_8009CBF8:
/* 097658 8009CBF8 38000000 */  li      r0, 0
/* 09765C 8009CBFC 90030010 */  stw     r0, 0x10(r3)
lbl_8009CC00:
/* 097660 8009CC00 83DF0000 */  lwz     r30, 0(r31)
/* 097664 8009CC04 38C00000 */  li      r6, 0
/* 097668 8009CC08 6CC48000 */  xoris   r4, r6, 0x8000
/* 09766C 8009CC0C 90DF0000 */  stw     r6, 0(r31)
/* 097670 8009CC10 801F0018 */  lwz     r0, 0x18(r31)
/* 097674 8009CC14 80BF001C */  lwz     r5, 0x1c(r31)
/* 097678 8009CC18 6C038000 */  xoris   r3, r0, 0x8000
/* 09767C 8009CC1C 7C053010 */  subfc   r0, r5, r6
/* 097680 8009CC20 7C632110 */  subfe   r3, r3, r4
/* 097684 8009CC24 7C642110 */  subfe   r3, r4, r4
/* 097688 8009CC28 7C6300D1 */  neg.    r3, r3
/* 09768C 8009CC2C 41820018 */  beq     lbl_8009CC44
/* 097690 8009CC30 387F0000 */  addi    r3, r31, 0
/* 097694 8009CC34 38FE0000 */  addi    r7, r30, 0
/* 097698 8009CC38 38C00000 */  li      r6, 0
/* 09769C 8009CC3C 38A00000 */  li      r5, 0
/* 0976A0 8009CC40 4BFFFAE5 */  bl      InsertAlarm
lbl_8009CC44:
/* 0976A4 8009CC44 838D8B10 */  lwz     r28, AlarmQueue@sda21(r13)
/* 0976A8 8009CC48 281C0000 */  cmplwi  r28, 0
/* 0976AC 8009CC4C 41820074 */  beq     lbl_8009CCC0
/* 0976B0 8009CC50 48005679 */  bl      __OSGetSystemTime
/* 0976B4 8009CC54 80DC000C */  lwz     r6, 0xc(r28)
/* 0976B8 8009CC58 38E00000 */  li      r7, 0
/* 0976BC 8009CC5C 801C0008 */  lwz     r0, 8(r28)
/* 0976C0 8009CC60 6CE58000 */  xoris   r5, r7, 0x8000
/* 0976C4 8009CC64 7D043010 */  subfc   r8, r4, r6
/* 0976C8 8009CC68 7C030110 */  subfe   r0, r3, r0
/* 0976CC 8009CC6C 6C068000 */  xoris   r6, r0, 0x8000
/* 0976D0 8009CC70 7C074010 */  subfc   r0, r7, r8
/* 0976D4 8009CC74 7CA53110 */  subfe   r5, r5, r6
/* 0976D8 8009CC78 7CA63110 */  subfe   r5, r6, r6
/* 0976DC 8009CC7C 7CA500D1 */  neg.    r5, r5
/* 0976E0 8009CC80 41820010 */  beq     lbl_8009CC90
/* 0976E4 8009CC84 38600000 */  li      r3, 0
/* 0976E8 8009CC88 4BFFEE65 */  bl      PPCMtdec
/* 0976EC 8009CC8C 48000034 */  b       lbl_8009CCC0
lbl_8009CC90:
/* 0976F0 8009CC90 3C808000 */  lis     r4, 0x8000
/* 0976F4 8009CC94 6CE38000 */  xoris   r3, r7, 0x8000
/* 0976F8 8009CC98 7C044010 */  subfc   r0, r4, r8
/* 0976FC 8009CC9C 7C633110 */  subfe   r3, r3, r6
/* 097700 8009CCA0 7C663110 */  subfe   r3, r6, r6
/* 097704 8009CCA4 7C6300D1 */  neg.    r3, r3
/* 097708 8009CCA8 41820010 */  beq     lbl_8009CCB8
/* 09770C 8009CCAC 7D034378 */  mr      r3, r8
/* 097710 8009CCB0 4BFFEE3D */  bl      PPCMtdec
/* 097714 8009CCB4 4800000C */  b       lbl_8009CCC0
lbl_8009CCB8:
/* 097718 8009CCB8 3864FFFF */  addi    r3, r4, -1
/* 09771C 8009CCBC 4BFFEE31 */  bl      PPCMtdec
lbl_8009CCC0:
/* 097720 8009CCC0 48004591 */  bl      OSDisableScheduler
/* 097724 8009CCC4 38610018 */  addi    r3, r1, 0x18
/* 097728 8009CCC8 480014DD */  bl      OSClearContext
/* 09772C 8009CCCC 38610018 */  addi    r3, r1, 0x18
/* 097730 8009CCD0 4800130D */  bl      OSSetCurrentContext
/* 097734 8009CCD4 399E0000 */  addi    r12, r30, 0
/* 097738 8009CCD8 7D8803A6 */  mtlr    r12
/* 09773C 8009CCDC 387F0000 */  addi    r3, r31, 0
/* 097740 8009CCE0 389D0000 */  addi    r4, r29, 0
/* 097744 8009CCE4 4E800021 */  blrl    
/* 097748 8009CCE8 38610018 */  addi    r3, r1, 0x18
/* 09774C 8009CCEC 480014B9 */  bl      OSClearContext
/* 097750 8009CCF0 7FA3EB78 */  mr      r3, r29
/* 097754 8009CCF4 480012E9 */  bl      OSSetCurrentContext
/* 097758 8009CCF8 48004599 */  bl      OSEnableScheduler
/* 09775C 8009CCFC 48004A61 */  bl      __OSReschedule
/* 097760 8009CD00 7FA3EB78 */  mr      r3, r29
/* 097764 8009CD04 480013C1 */  bl      OSLoadContext
/* 097768 8009CD08 800102F4 */  lwz     r0, 0x2f4(r1)
/* 09776C 8009CD0C 83E102EC */  lwz     r31, 0x2ec(r1)
/* 097770 8009CD10 83C102E8 */  lwz     r30, 0x2e8(r1)
/* 097774 8009CD14 83A102E4 */  lwz     r29, 0x2e4(r1)
/* 097778 8009CD18 838102E0 */  lwz     r28, 0x2e0(r1)
/* 09777C 8009CD1C 382102F0 */  addi    r1, r1, 0x2f0
/* 097780 8009CD20 7C0803A6 */  mtlr    r0
/* 097784 8009CD24 4E800020 */  blr     

DecrementerExceptionHandler:
/* 097788 8009CD28 90040000 */  stw     r0, 0(r4)
/* 09778C 8009CD2C 90240004 */  stw     r1, 4(r4)
/* 097790 8009CD30 90440008 */  stw     r2, 8(r4)
/* 097794 8009CD34 BCC40018 */  stmw    r6, 0x18(r4)
/* 097798 8009CD38 7C11E2A6 */  mfspr   r0, 0x391
/* 09779C 8009CD3C 900401A8 */  stw     r0, 0x1a8(r4)
/* 0977A0 8009CD40 7C12E2A6 */  mfspr   r0, 0x392
/* 0977A4 8009CD44 900401AC */  stw     r0, 0x1ac(r4)
/* 0977A8 8009CD48 7C13E2A6 */  mfspr   r0, 0x393
/* 0977AC 8009CD4C 900401B0 */  stw     r0, 0x1b0(r4)
/* 0977B0 8009CD50 7C14E2A6 */  mfspr   r0, 0x394
/* 0977B4 8009CD54 900401B4 */  stw     r0, 0x1b4(r4)
/* 0977B8 8009CD58 7C15E2A6 */  mfspr   r0, 0x395
/* 0977BC 8009CD5C 900401B8 */  stw     r0, 0x1b8(r4)
/* 0977C0 8009CD60 7C16E2A6 */  mfspr   r0, 0x396
/* 0977C4 8009CD64 900401BC */  stw     r0, 0x1bc(r4)
/* 0977C8 8009CD68 7C17E2A6 */  mfspr   r0, 0x397
/* 0977CC 8009CD6C 900401C0 */  stw     r0, 0x1c0(r4)
/* 0977D0 8009CD70 9421FFF8 */  stwu    r1, -8(r1)
/* 0977D4 8009CD74 4BFFFD84 */  b       DecrementerExceptionCallback

OnReset:
/* 0977D8 8009CD78 7C0802A6 */  mflr    r0
/* 0977DC 8009CD7C 90010004 */  stw     r0, 4(r1)
/* 0977E0 8009CD80 9421FFE8 */  stwu    r1, -0x18(r1)
/* 0977E4 8009CD84 93E10014 */  stw     r31, 0x14(r1)
/* 0977E8 8009CD88 93C10010 */  stw     r30, 0x10(r1)
/* 0977EC 8009CD8C 2C030000 */  cmpwi   r3, 0
/* 0977F0 8009CD90 4182006C */  beq     lbl_8009CDFC
/* 0977F4 8009CD94 800D8B10 */  lwz     r0, AlarmQueue@sda21(r13)
/* 0977F8 8009CD98 28000000 */  cmplwi  r0, 0
/* 0977FC 8009CD9C 7C1F0378 */  mr      r31, r0
/* 097800 8009CDA0 4182000C */  beq     lbl_8009CDAC
/* 097804 8009CDA4 801F0014 */  lwz     r0, 0x14(r31)
/* 097808 8009CDA8 48000008 */  b       lbl_8009CDB0
lbl_8009CDAC:
/* 09780C 8009CDAC 38000000 */  li      r0, 0
lbl_8009CDB0:
/* 097810 8009CDB0 7C1E0378 */  mr      r30, r0
/* 097814 8009CDB4 48000004 */  b       lbl_8009CDB8
lbl_8009CDB8:
/* 097818 8009CDB8 48000004 */  b       lbl_8009CDBC
lbl_8009CDBC:
/* 09781C 8009CDBC 48000038 */  b       lbl_8009CDF4
lbl_8009CDC0:
/* 097820 8009CDC0 7FE3FB78 */  mr      r3, r31
/* 097824 8009CDC4 480188A9 */  bl      __DVDTestAlarm
/* 097828 8009CDC8 2C030000 */  cmpwi   r3, 0
/* 09782C 8009CDCC 4082000C */  bne     lbl_8009CDD8
/* 097830 8009CDD0 7FE3FB78 */  mr      r3, r31
/* 097834 8009CDD4 4BFFFC09 */  bl      OSCancelAlarm
lbl_8009CDD8:
/* 097838 8009CDD8 281E0000 */  cmplwi  r30, 0
/* 09783C 8009CDDC 7FDFF378 */  mr      r31, r30
/* 097840 8009CDE0 4182000C */  beq     lbl_8009CDEC
/* 097844 8009CDE4 801E0014 */  lwz     r0, 0x14(r30)
/* 097848 8009CDE8 48000008 */  b       lbl_8009CDF0
lbl_8009CDEC:
/* 09784C 8009CDEC 38000000 */  li      r0, 0
lbl_8009CDF0:
/* 097850 8009CDF0 7C1E0378 */  mr      r30, r0
lbl_8009CDF4:
/* 097854 8009CDF4 281F0000 */  cmplwi  r31, 0
/* 097858 8009CDF8 4082FFC8 */  bne     lbl_8009CDC0
lbl_8009CDFC:
/* 09785C 8009CDFC 38600001 */  li      r3, 1
/* 097860 8009CE00 8001001C */  lwz     r0, 0x1c(r1)
/* 097864 8009CE04 83E10014 */  lwz     r31, 0x14(r1)
/* 097868 8009CE08 83C10010 */  lwz     r30, 0x10(r1)
/* 09786C 8009CE0C 38210018 */  addi    r1, r1, 0x18
/* 097870 8009CE10 7C0803A6 */  mtlr    r0
/* 097874 8009CE14 4E800020 */  blr     

.section .data, "wa"

.balign 8

/* 000ED8A0 800F0820 0010 */
ResetFunctionInfo:
    .long OnReset, 0xFFFFFFFF, 0x00000000, 0x00000000

.section .sbss, "wa"

.balign 8

/* 000F1A70 801357F0 0008 */
AlarmQueue:
    .skip 8
